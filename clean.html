
<!DOCTYPE html>
<html>

<head>
    <title>Clear my code</title>
    <link rel="stylesheet" href="//code.jquery.com/mobile/1.4.1/jquery.mobile-1.4.1.min.css" />
    <link rel="stylesheet" href="css/style.css" />
    <script type="text/javascript" src="//code.jquery.com/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="//code.jquery.com/mobile/1.4.1/jquery.mobile-1.4.1.min.js"></script>
    <script type="text/javascript">
    </script>
    <script type="text/javascript">
    $(document).ready(function() {

        $('.transform').click(function(e) {

            var $checked = [];

            $('.ui-checkbox-on').each(function(i, val) {

                var text = $(this).text();

                var separator = i === 0 ? ' ' : ' ';

                var rel = [

                    text,

                    separator

                ].join('');

                $checked.push(rel);

            });

            var $options = $('<div/>', {
                'class': 'yearTabs',
                html: $checked.join('')
            }).html();

            console.log($options);

            e.preventDefault();

            var texta = $('.start').val();

            $('.final').html($.parseHTML(texta));

            $('.final *').each(function() {

                $(this).removeAttr($options);

            });

            var newvalue = $('.final').html();

            $('.result').val(newvalue);

        });

    });
    </script>
    <style type="text/css">
        textarea {
            min-height: 500px;
        }
    </style>
</head>

<body>
    <div data-role="page" id="index">
        <div data-role="content">
            <ul data-role="listview" data-inset="true">
                <li><a href="#clear">Clear my HTML code.</a></li>
            </ul>
        </div>
    </div>
    <div data-role="page" id="clear">
        <div data-role="content" class="wrapper">
            <div class="ui-grid-a">
                <div class="entertext ui-block-a">
                    <textarea class="start" rows="10" style="height:300px!important;"></textarea>
                </div>
                <div class="resulttext ui-block-b">
                    <textarea class="result" rows="10" style="height:300px!important;"></textarea>
                </div>
            </div>
            <fieldset data-role="controlgroup" class="ui-block-solo">
                <!-- <h1>Ce sa curatam?</h1> -->
                <input type="checkbox" name="checkbox-1a" id="checkbox-1a">
                <label for="checkbox-1a">style</label>
                <input type="checkbox" name="checkbox-2a" id="checkbox-2a">
                <label for="checkbox-2a">class</label>
                <input type="checkbox" name="checkbox-3a" id="checkbox-3a">
                <label for="checkbox-3a">id</label>
            </fieldset>
            <input class="transform" type="submit" value="Make me Happy" data-theme="b">
            <a href="#index" class="ui-btn ui-icon-back ui-btn-icon-notext ui-corner-all">No text</a>
            <div class="final" style="display:none;"></div>
        </div>
    </div>
</body>

</html>
